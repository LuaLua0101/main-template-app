/*! For license information please see 26.ad9dfb1a.chunk.js.LICENSE.txt */
(this["webpackJsonpreact-hook"]=this["webpackJsonpreact-hook"]||[]).push([[26],{1061:function(e,t,o){"use strict";o.r(t);var n=o(20),r=o(0),i=o.n(r),a=o(450),s=o.n(a),c=o(690),u=o.n(c),d=s()("http://localhost:8000"),l={aspectRatio:.6666666667,facingMode:"user"},h={aspectRatio:.6666666667,facingMode:"user"};t.default=function(e){var t=Object(r.useState)(0),o=Object(n.a)(t,2),a=o[0],s=o[1],c=Object(r.useState)(""),f=Object(n.a)(c,2),p=f[0],m=f[1],v=Object(r.useState)(!1),g=Object(n.a)(v,2),y=g[0],S=g[1],b=i.a.useRef(null);Object(r.useEffect)((function(){return d.on("hello",(function(e){console.log("get mess grom server",e)})),y&&(console.log("joining room"),d.emit("room",{room:"test-room"})),function(){y&&(console.log("leaving room"),d.emit("leave room",{room:"test-room"}))}}),[y]);var M=function(e){console.log("get mess grom server",e),m(e)};Object(r.useEffect)((function(){d.on("receive message",M),s(a+1)}),[]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(u.a,{videoConstraints:l,audioConstraints:h,width:window.width/10,ref:b,screenshotQuality:1,audio:!0,onUserMedia:function(e){console.log(e)}}),i.a.createElement("h1",null,y&&"You Have Entered The Room",!y&&"Outside Room"),i.a.createElement("p",null,a," messages have been emitted"),i.a.createElement("p",null,p," messages from server"),y&&i.a.createElement("button",{onClick:function(){console.log("emitting new message"),d.emit("new message",{room:"test-room"}),s(a+1)}},"Emit new message"),i.a.createElement("button",{onClick:function(){S(!y)}},y&&"Leave Room",!y&&"Enter Room"))}},458:function(e,t){},690:function(e,t,o){var n;n=function(e){return function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(e,t,o){"use strict";o.r(t);var n=o("react"),r=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=function(){return(i=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},a=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(o[n[r]]=e[n[r]])}return o};function s(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)}"undefined"!==typeof window&&(void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return t?new Promise((function(o,n){t.call(navigator,e,o,n)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}));var c=function(e){function t(t){var o=e.call(this,t)||this;return o.canvas=null,o.ctx=null,o.unmounted=!1,o.state={hasUserMedia:!1},o}return r(t,e),t.prototype.componentDidMount=function(){var e=this.state,t=this.props;s()?e.hasUserMedia||this.requestUserMedia():t.onUserMediaError("getUserMedia not supported")},t.prototype.componentDidUpdate=function(e){var t=this.props;if(s()){var o=JSON.stringify(e.audioConstraints)!==JSON.stringify(t.audioConstraints),n=JSON.stringify(e.videoConstraints)!==JSON.stringify(t.videoConstraints),r=e.minScreenshotWidth!==t.minScreenshotWidth,i=e.minScreenshotHeight!==t.minScreenshotHeight;(n||r||i)&&(this.canvas=null,this.ctx=null),(o||n)&&(this.stopAndCleanup(),this.requestUserMedia())}else t.onUserMediaError("getUserMedia not supported")},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},t.stopMediaStream=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().map((function(e){return e.stop()})),e.getAudioTracks().map((function(e){return e.stop()}))):e.stop())},t.prototype.stopAndCleanup=function(){var e=this.state;e.hasUserMedia&&(t.stopMediaStream(this.stream),e.src&&window.URL.revokeObjectURL(e.src))},t.prototype.getScreenshot=function(e){var t=this.state,o=this.props;if(!t.hasUserMedia)return null;var n=this.getCanvas(e);return n&&n.toDataURL(o.screenshotFormat,o.screenshotQuality)},t.prototype.getCanvas=function(e){var t=this.state,o=this.props;if(!this.video)return null;if(!t.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var n=this.video.videoWidth,r=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var i=n/r;r=(n=o.minScreenshotWidth||this.video.clientWidth)/i,o.minScreenshotHeight&&r<o.minScreenshotHeight&&(n=(r=o.minScreenshotHeight)*i)}this.canvas=document.createElement("canvas"),this.canvas.width=(null===e||void 0===e?void 0:e.width)||n,this.canvas.height=(null===e||void 0===e?void 0:e.height)||r,this.ctx=this.canvas.getContext("2d")}var a=this.ctx,s=this.canvas;return a&&s&&(o.mirrored&&(a.translate(s.width,0),a.scale(-1,1)),a.imageSmoothingEnabled=o.imageSmoothing,a.drawImage(this.video,0,0,(null===e||void 0===e?void 0:e.width)||s.width,(null===e||void 0===e?void 0:e.height)||s.height),o.mirrored&&(a.scale(-1,1),a.translate(-s.width,0))),s},t.prototype.requestUserMedia=function(){var e=this,o=this.props,n=function(n,r){var i={video:"undefined"===typeof r||r};o.audio&&(i.audio="undefined"===typeof n||n),navigator.mediaDevices.getUserMedia(i).then((function(o){e.unmounted?t.stopMediaStream(o):e.handleUserMedia(null,o)})).catch((function(t){e.handleUserMedia(t)}))};if("mediaDevices"in navigator)n(o.audioConstraints,o.videoConstraints);else{var r=function(e){return{optional:[{sourceId:e}]}},i=function(e){var t=e.deviceId;return"string"===typeof t?t:Array.isArray(t)&&t.length>0?t[0]:"object"===typeof t&&t.ideal?t.ideal:null};MediaStreamTrack.getSources((function(e){var t=null,a=null;e.forEach((function(e){"audio"===e.kind?t=e.id:"video"===e.kind&&(a=e.id)}));var s=i(o.audioConstraints);s&&(t=s);var c=i(o.videoConstraints);c&&(a=c),n(r(t),r(a))}))}},t.prototype.handleUserMedia=function(e,t){var o=this.props;if(e||!t)return this.setState({hasUserMedia:!1}),void o.onUserMediaError(e);this.stream=t;try{this.video&&(this.video.srcObject=t),this.setState({hasUserMedia:!0})}catch(n){this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(t)})}o.onUserMedia(t)},t.prototype.render=function(){var e=this,t=this.state,o=this.props,r=o.audio,s=(o.forceScreenshotSourceSize,o.onUserMedia,o.onUserMediaError,o.screenshotFormat,o.screenshotQuality,o.minScreenshotWidth,o.minScreenshotHeight,o.audioConstraints,o.videoConstraints,o.imageSmoothing,o.mirrored),c=o.style,u=void 0===c?{}:c,d=a(o,["audio","forceScreenshotSourceSize","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style"]),l=s?i(i({},u),{transform:(u.transform||"")+" scaleX(-1)"}):u;return n.createElement("video",i({autoPlay:!0,src:t.src,muted:r,playsInline:!0,ref:function(t){e.video=t},style:l},d))},t.defaultProps={audio:!0,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},t}(n.Component);t.default=c},react:function(t,o){t.exports=e}}).default},e.exports=n(o(0))}}]);